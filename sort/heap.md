# 堆

---

## 定义

数据结构二叉堆能够很好地实现优先队列的基本操作。在二叉堆数组中，每个元素都要保证大于等于另两个特定位置的元素。相应地，这些位置的元素又至少要大于等于数组中的另两个元素，以此类推。

* **当一棵二叉树的每个结点都大于等于它的两个子结点时，它被称为堆有序。**
* **根结点是堆有序的二叉树中最大结点。**

![](/assets/sort/heap_define.png)

#### 二叉堆的表示

完全二叉树只用数组而不需要指针就可以表示。具体方法就是将二叉树的结点按照层级顺序放入数组中。（不使用数组的第一个位置）

![](/assets/sort/heap_define2.png)

* **位置K的结点的父结点的位置为K/2，而它的两个子结点的位置则分别为2K和2K+1。**
* **一棵大小为N的完全二叉树的高度为logN。**

## 算法

#### 由下至上的堆有序化（上浮）

如果堆的有序状态因为某个结点变得比它的父结点更大而被打破，那么我们就需要通过交换它和它的父结点来修复堆。交换后这个结点比它的两个子结点都大，但这个结点仍然可能比它现在的父结点更大。我们可以一遍遍地用同样的办法来回复秩序。

